<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      layout:decorate="layout">
<head>
    <title>Dashboard</title>
</head>
<body>
<div layout:fragment="content">

<!-- 
Roles: <span sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')" >[ROLE_USER, ROLE_ADMIN]</span>
Is Authenticated <span sec:authorize="isAuthenticated()">Authenticated as</span> <span sec:authentication="principal.firstName"> </span><span sec:authentication="principal.lastName"></span>
Roles: <span sec:authentication="principal.roles">[ROLE_USER, ROLE_ADMIN]</span> -->

    <!-- Small boxes (Stat box) -->
    <div class="row">
        <div class="col-lg-3 col-xs-12" sec:authorize="hasRole('ROLE_OUT_STOR')">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 th:text="${pendDispCnt}"></h3>

                    <p>PENDING FOR DISPATCH</p>
                </div>
                <div class="icon">
                    <i class="ion ion-chevron-right"></i>
                </div>
                <a href="#" th:href="@{/reports/disprep/PENDING}" class="small-box-footer">CLICK HERE <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
         <div class="col-lg-3 col-xs-12" sec:authorize="hasAnyRole('ROLE_REQ_CR','ROLE_ST_HEAD','ROLE_BD_MKT')">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 th:text="${ackDispCnt}"></h3>
                    <p>DISPATCH ACKNOWLEDGEMENT</p>
                </div>
                <div class="icon">
                    <i class="ion ion-chevron-right"></i>
                </div>
                <a href="#" th:href="@{/reports/dispack}" class="small-box-footer">CLICK HERE <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <!-- ./col -->
         <div class="col-lg-4 col-xs-12" sec:authorize="hasRole('ROLE_REQ_CR')">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 th:text="${apprTpmCnt}"></h3>
                    <p>TPM APPROVED</p>
                </div>
                <div class="icon">
                    <i class="ion ion-chevron-right"></i>
                </div>
                <a href="#" th:href="@{/tpm/tpmReqListSts/APPROVED}" class="small-box-footer">CLICK HERE <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <!-- ./col -->
         <div class="col-lg-4 col-xs-12" sec:authorize="hasRole('ROLE_ST_HEAD')">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 th:text="${apprTpsCnt}"></h3>
                    <p>TPS APPROVED</p>
                </div>
                <div class="icon">
                    <i class="ion ion-chevron-right"></i>
                </div>
                <a href="#" th:href="@{/tps/tpsReqListSts/APPROVED}" class="small-box-footer">CLICK HERE <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <!-- ./col -->
         <div class="col-lg-4 col-xs-12" sec:authorize="hasAnyRole('ROLE_BD_MKT','ROLE_ST_HEAD')">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 th:text="${apprBDCnt}"></h3>
                    <p>PROMOTIONAL MATERIALS APPROVED</p>
                </div>
                <div class="icon">
                    <i class="ion ion-chevron-right"></i>
                </div>
                
                <a  href="#" th:href="@{/bd/bdRequestList/APPROVED}" class="small-box-footer">CLICK HERE <i class="fa fa-arrow-circle-right"></i></a>
                
                
                <!-- <a  sec:authorize="hasRole('ROLE_ST_HEAD')" href="#" th:href="@{/tps/tpsReqListSts/APPROVED}" class="small-box-footer">CLICK HERE <i class="fa fa-arrow-circle-right"></i></a> -->
                
            </div>
        </div>
        <!-- ./col -->
        <!-- ./col -->
         <div class="col-lg-4 col-xs-12" sec:authorize="hasRole('ADMIN')">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 th:text="${toActTpmRequest}"></h3>
                    <p>TPM TO BE APPROVED</p>
                </div>
                <div class="icon">
                    <i class="ion ion-chevron-right"></i>
                </div>
                <a href="#" th:href="@{/tpm/tpmReqListSts/NEW}" class="small-box-footer">CLICK HERE <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <!-- ./col -->
         <div class="col-lg-4 col-xs-12" sec:authorize="hasRole('ADMIN')">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 th:text="${toActTpsRequest}"></h3>
                    <p>TPS TO BE APPROVED</p>
                </div>
                <div class="icon">
                    <i class="ion ion-chevron-right"></i>
                </div>
                <a href="#" th:href="@{/tps/tpsReqListSts/NEW}" class="small-box-footer">CLICK HERE <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
         <div class="col-lg-4 col-xs-12" sec:authorize="hasRole('ADMIN')">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 th:text="${toActBDRequest}"></h3>
                    <p>PROMOTIONAL MATERIALS TO BE APPROVED</p>
                </div>
                <div class="icon">
                    <i class="ion ion-chevron-right"></i>
                </div>
                <a href="#" th:href="@{/bd/bdRequestList/NEW}" class="small-box-footer">CLICK HERE <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
         </div>
  <!--        
         <div class="row">   
         <div class="col-lg-4 col-xs-12" sec:authorize="hasAnyRole('ADMIN','ROLE_ZN_HEAD')">
           <div class="box box-success">
				<div class="box-header with-border">
				  <h3 class="box-title"><b>TPM SCHEDULED VS COMPLETED</b></h3>

					  <div class="box-tools pull-right">
						<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
						</button>
						<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
					  </div>
				</div>
				<div class="box-body chart-responsive">
				  <div class="chart" id="bar-chartTPM" style="height: 300px;"></div>
				</div>
				
          </div>
          
        </div>
         <div class="col-lg-4 col-xs-12" sec:authorize="hasAnyRole('ADMIN','ROLE_ZN_HEAD')">
       
           <div class="box box-success">
				<div class="box-header with-border">
				  <h3 class="box-title"><b>TPS SCHEDULED VS COMPLETED</b></h3>

					  <div class="box-tools pull-right">
						<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
						</button>
						<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
					  </div>
				</div>
				<div class="box-body chart-responsive">
				  <div class="chart" id="bar-chartTPS" style="height: 300px;"></div>
				</div>
				
       
          </div>
          
        </div>
        
         <div class="col-lg-4 col-xs-12" sec:authorize="hasAnyRole('ADMIN','ROLE_ZN_HEAD')">
       
           <div class="box box-success">
				<div class="box-header with-border">
				  <h3 class="box-title"><b>BD SCHEDULED VS COMPLETED</b></h3>

					  <div class="box-tools pull-right">
						<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
						</button>
						<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
					  </div>
				</div>
				<div class="box-body chart-responsive">
				  <div class="chart" id="bar-chartBD" style="height: 300px;"></div>
				</div>
				
       
          </div>
          
        </div>
        
        
        
            </div>-->
    
    </div>

<div layout:fragment="scriptContent">
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
	<script th:src="@{/resources/plugins/morris/morris.min.js}"></script>
	<script th:src="@{/resources/plugins/sparkline/jquery.sparkline.min.js}"></script>
	<script th:src="@{/resources/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js}"></script>
	<script th:src="@{/resources/plugins/jvectormap/jquery-jvectormap-world-mill-en.js}"></script>
	<script th:src="@{/resources/plugins/knob/jquery.knob.js}"></script>
	<script th:src="@{/resources/dist/js/pages/dashboard.js}"></script> -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script th:src="@{/resources/plugins/morris/morris.min.js}"></script>	
<script type="text/javascript" th:inline="javascript">

</script>
<script type="text/javascript" th:inline="javascript">
  $(function () {
    "use strict";
    var reqListTPM = /*[[${reqListTPM}]]*/ [];
    var reqListTPS = /*[[${reqListTPS}]]*/ [];
    var reqListBD = /*[[${reqListBD}]]*/ [];
    var hTPM = new Object(); 
    for (var i = 0; i < reqListTPM.length; i++) {
    	var mo=reqListTPM[i];
   // alert(reqList[i]+","+mo.toString().split(',')[0]); 
    // or just {}
    var month=mo.toString().split(',')[0];
    hTPM[month] =mo.toString().split(',')[1]+"#"+mo.toString().split(',')[2] ;
   

    }
    var hTPS = new Object(); 
    for (var i = 0; i < reqListTPS.length; i++) {
    	var mo=reqListTPS[i];
   // alert(reqList[i]+","+mo.toString().split(',')[0]); 
    // or just {}
    var month=mo.toString().split(',')[0];
    hTPS[month] =mo.toString().split(',')[1]+"#"+mo.toString().split(',')[2] ;
   

    }
    var hBD = new Object(); 
    //alert(reqListBD.length);
    for (var i = 0; i < reqListBD.length; i++) {
    	var mo=reqListBD[i];
   // alert(reqList[i]+","+mo.toString().split(',')[0]); 
    // or just {}
    var month=mo.toString().split(',')[0];
    hBD[month] =mo.toString().split(',')[1]+"#"+mo.toString().split(',')[2] ;
   

    }
    // AREA CHART
 /*for (var k in h) {
    // use hasOwnProperty to filter out keys from the Object.prototype
    if (hTPM.hasOwnProperty(k)) {
        alert('key is: ' + k + ', value is: ' + h[k]);
    }
}*/ var janCrt,janSubt,febCrt,febSubt,marCrt,marSubt,aprCrt,aprSubt,mayCrt,maySubt,junCrt,junSubt,julCrt,julSubt,augCrt,augSubt;
    var sepCrt,sepSubt,octCrt,octSubt,novCrt,novSubt,decCrt,decSubt;
  
    //BAR CHART
  //  alert(hTPM.hasOwnProperty('January')+","+hTPM.hasOwnProperty('November'));
    if(hTPM.hasOwnProperty('January'))
    {		
     janCrt=hTPM.January.toString().split('#')[0];
     janSubt=hTPM.January.toString().split('#')[1];
    }
    else{janCrt=0;janSubt=0;}
    if(hTPM.hasOwnProperty('February'))
    {		
     febCrt=hTPM.February.toString().split('#')[0];
     febSubt=hTPM.February.toString().split('#')[1];
    }
    else{febCrt=0;febSubt=0;}
    if(hTPM.hasOwnProperty('March'))
    {		
     marCrt=hTPM.MarchTPM.toString().split('#')[0];
     marSubt=hTPM.MarchTPM.toString().split('#')[1];
    }
    else{marCrt=0;marSubt=0;}
    if(hTPM.hasOwnProperty('April'))
    {		
     aprCrt=hTPM.April.toString().split('#')[0];
     aprSubt=hTPM.April.toString().split('#')[1];
    }
    else{aprCrt=0;aprSubt=0;}
    if(hTPM.hasOwnProperty('May'))
    {		
     mayCrt=hTPM.May.toString().split('#')[0];
     maySubt=hTPM.May.toString().split('#')[1];
    }
    else{mayCrt=0;maySubt=0;}
    if(hTPM.hasOwnProperty('June'))
    {		
     junCrt=hTPM.June.toString().split('#')[0];
     junSubt=hTPM.June.toString().split('#')[1];
    }
    else{junCrt=0;junSubt=0;}
    if(hTPM.hasOwnProperty('July'))
    {		
     julCrt=hTPM.July.toString().split('#')[0];
     julSubt=hTPM.July.toString().split('#')[1];
    }
    else{julCrt=0;julSubt=0;}
    if(hTPM.hasOwnProperty('August'))
    {		
     augCrt=hTPM.August.toString().split('#')[0];
     augSubt=hTPM.August.toString().split('#')[1];
    }
    else{augCrt=0;augSubt=0;}
    if(hTPM.hasOwnProperty('September'))
    {		
     sepCrt=hTPM.September.toString().split('#')[0];
     sepSubt=hTPM.September.toString().split('#')[1];
    }
    else{sepCrt=0;sepSubt=0;}
    if(hTPM.hasOwnProperty('October'))
    {		
     octCrt=hTPM.October.toString().split('#')[0];
     octSubt=hTPM.October.toString().split('#')[1];
    }
    else{octCrt=0;octSubt=0;}
    if(hTPM.hasOwnProperty('November'))
    {		
     novCrt=hTPM.November.toString().split('#')[0];
     novSubt=hTPM.November.toString().split('#')[1];
    }
    else{novCrt=0;novSubt=0;}
    if(hTPM.hasOwnProperty('December'))
    {		
     decCrt=hTPM.December.toString().split('#')[0];
     decSubt=hTPM.December.toString().split('#')[1];
    }
    else{decCrt=0;decSubt=0;}
    var bar = new Morris.Bar({
      element: 'bar-chartTPM',
      resize: true,
      data: [
        {y: 'JAN', a: janCrt, b: janSubt},
        {y: 'FEB', a: febCrt, b: febSubt},
        {y: 'MAR', a: marCrt, b: marSubt},
        {y: 'APR', a: aprCrt, b: aprSubt},
        {y: 'MAY', a: mayCrt, b: maySubt},
        {y: 'JUN', a: junCrt, b: junSubt},
        {y: 'JUL', a: julCrt, b: julSubt},
        {y: 'AUG', a: augCrt, b: augSubt},
        {y: 'SEP', a: sepCrt, b: sepSubt},
        {y: 'OCT', a: octCrt, b: octSubt},
        {y: 'NOV', a: novCrt, b: novSubt},
        {y: 'DEC', a: decCrt, b: decSubt}
      ],
     
    
      barColors: ['#00a65a', '#f56954'],
      xkey: 'y',
      ykeys: ['a', 'b'],
      labels: ['Created', 'Submitted'],
      hideHover: 'auto'
    });
    if(hTPS.hasOwnProperty('January'))
    {		
     janCrt=hTPS.January.toString().split('#')[0];
     janSubt=hTPS.January.toString().split('#')[1];
    }
    else{janCrt=0;janSubt=0;}
    if(hTPS.hasOwnProperty('February'))
    {		
     febCrt=hTPS.February.toString().split('#')[0];
     febSubt=hTPS.February.toString().split('#')[1];
    }
    else{febCrt=0;febSubt=0;}
    if(hTPS.hasOwnProperty('March'))
    {		
     marCrt=hTPS.MarchTPS.toString().split('#')[0];
     marSubt=hTPS.MarchTPS.toString().split('#')[1];
    }
    else{marCrt=0;marSubt=0;}
    if(hTPS.hasOwnProperty('April'))
    {		
     aprCrt=hTPS.April.toString().split('#')[0];
     aprSubt=hTPS.April.toString().split('#')[1];
    }
    else{aprCrt=0;aprSubt=0;}
    if(hTPS.hasOwnProperty('May'))
    {		
     mayCrt=hTPS.May.toString().split('#')[0];
     maySubt=hTPS.May.toString().split('#')[1];
    }
    else{mayCrt=0;maySubt=0;}
    if(hTPS.hasOwnProperty('June'))
    {		
     junCrt=hTPS.June.toString().split('#')[0];
     junSubt=hTPS.June.toString().split('#')[1];
    }
    else{junCrt=0;junSubt=0;}
    if(hTPS.hasOwnProperty('July'))
    {		
     julCrt=hTPS.July.toString().split('#')[0];
     julSubt=hTPS.July.toString().split('#')[1];
    }
    else{julCrt=0;julSubt=0;}
    if(hTPS.hasOwnProperty('August'))
    {		
     augCrt=hTPS.August.toString().split('#')[0];
     augSubt=hTPS.August.toString().split('#')[1];
    }
    else{augCrt=0;augSubt=0;}
    if(hTPS.hasOwnProperty('September'))
    {		
     sepCrt=hTPS.September.toString().split('#')[0];
     sepSubt=hTPS.September.toString().split('#')[1];
    }
    else{sepCrt=0;sepSubt=0;}
    if(hTPS.hasOwnProperty('October'))
    {		
     octCrt=hTPS.October.toString().split('#')[0];
     octSubt=hTPS.October.toString().split('#')[1];
    }
    else{octCrt=0;octSubt=0;}
    if(hTPS.hasOwnProperty('November'))
    {		
     novCrt=hTPS.November.toString().split('#')[0];
     novSubt=hTPS.November.toString().split('#')[1];
    }
    else{novCrt=0;novSubt=0;}
    if(hTPS.hasOwnProperty('December'))
    {		
     decCrt=hTPS.December.toString().split('#')[0];
     decSubt=hTPS.December.toString().split('#')[1];
    }
    else{decCrt=0;decSubt=0;}
    
      
      var barTPS = new Morris.Bar({
          element: 'bar-chartTPS',
          resize: true,
          data: [
            {y: 'JAN', a: janCrt, b: janSubt},
            {y: 'FEB', a: febCrt, b: febSubt},
            {y: 'MAR', a: marCrt, b: marSubt},
            {y: 'APR', a: aprCrt, b: aprSubt},
            {y: 'MAY', a: mayCrt, b: maySubt},
            {y: 'JUN', a: junCrt, b: junSubt},
            {y: 'JUL', a: julCrt, b: julSubt},
            {y: 'AUG', a: augCrt, b: augSubt},
            {y: 'SEP', a: sepCrt, b: sepSubt},
            {y: 'OCT', a: octCrt, b: octSubt},
            {y: 'NOV', a: novCrt, b: novSubt},
            {y: 'DEC', a: decCrt, b: decSubt}
          ],
          barColors: ['#00a65a', '#f56954'],
          xkey: 'y',
          ykeys: ['a', 'b'],
          labels: ['Created', 'Submitted'],
          hideHover: 'auto'
      });
      if(hBD.hasOwnProperty('January'))
      {		
       janCrt=hBD.January.toString().split('#')[0];
       janSubt=hBD.January.toString().split('#')[1];
      }
      else{janCrt=0;janSubt=0;}
      if(hBD.hasOwnProperty('February'))
      {		
       febCrt=hBD.February.toString().split('#')[0];
       febSubt=hBD.February.toString().split('#')[1];
      }
      else{febCrt=0;febSubt=0;}
      if(hBD.hasOwnProperty('March'))
      {		
       marCrt=hBD.March.toString().split('#')[0];
       marSubt=hBD.March.toString().split('#')[1];
      }
      else{marCrt=0;marSubt=0;}
      if(hBD.hasOwnProperty('April'))
      {		
       aprCrt=hBD.April.toString().split('#')[0];
       aprSubt=hBD.April.toString().split('#')[1];
      }
      else{aprCrt=0;aprSubt=0;}
      if(hBD.hasOwnProperty('May'))
      {		
       mayCrt=hBD.May.toString().split('#')[0];
       maySubt=hBD.May.toString().split('#')[1];
      }
      else{mayCrt=0;maySubt=0;}
      if(hBD.hasOwnProperty('June'))
      {		
       junCrt=hBD.June.toString().split('#')[0];
       junSubt=hBD.June.toString().split('#')[1];
      }
      else{junCrt=0;junSubt=0;}
      if(hBD.hasOwnProperty('July'))
      {		
       julCrt=hBD.July.toString().split('#')[0];
       julSubt=hBD.July.toString().split('#')[1];
      }
      else{julCrt=0;julSubt=0;}
      if(hBD.hasOwnProperty('August'))
      {		
       augCrt=hBD.August.toString().split('#')[0];
       augSubt=hBD.August.toString().split('#')[1];
      }
      else{augCrt=0;augSubt=0;}
      if(hBD.hasOwnProperty('September'))
      {		
       sepCrt=hBD.September.toString().split('#')[0];
       sepSubt=hBD.September.toString().split('#')[1];
      }
      else{sepCrt=0;sepSubt=0;}
      if(hBD.hasOwnProperty('October'))
      {		
       octCrt=hBD.October.toString().split('#')[0];
       octSubt=hBD.October.toString().split('#')[1];
      }
      else{octCrt=0;octSubt=0;}
      if(hBD.hasOwnProperty('November'))
      {		
       novCrt=hBD.November.toString().split('#')[0];
       novSubt=hBD.November.toString().split('#')[1];
      }
      else{novCrt=0;novSubt=0;}
      if(hBD.hasOwnProperty('December'))
      {		
       decCrt=hBD.December.toString().split('#')[0];
       decSubt=hBD.December.toString().split('#')[1];
      }
      else{decCrt=0;decSubt=0;}
      
        
        var barBD = new Morris.Bar({
            element: 'bar-chartBD',
            resize: true,
            data: [
              {y: 'JAN', a: janCrt, b: janSubt},
              {y: 'FEB', a: febCrt, b: febSubt},
              {y: 'MAR', a: marCrt, b: marSubt},
              {y: 'APR', a: aprCrt, b: aprSubt},
              {y: 'MAY', a: mayCrt, b: maySubt},
              {y: 'JUN', a: junCrt, b: junSubt},
              {y: 'JUL', a: julCrt, b: julSubt},
              {y: 'AUG', a: augCrt, b: augSubt},
              {y: 'SEP', a: sepCrt, b: sepSubt},
              {y: 'OCT', a: octCrt, b: octSubt},
              {y: 'NOV', a: novCrt, b: novSubt},
              {y: 'DEC', a: decCrt, b: decSubt}
            ],
            barColors: ['#00a65a', '#f56954'],
            xkey: 'y',
            ykeys: ['a', 'b'],
            labels: ['Created', 'Submitted'],
            hideHover: 'auto'
        });

  });
</script>
</div>

</body>
</html>